# Springer Capital - Referral Program Data Pipeline

## ğŸ“Œ Overview
This project implements a **data profiling and pipeline system** for a referral program using **Python (Pandas)**.  
The goal is to:
- Process referral program data
- Profile all source tables
- Apply business logic to detect potential fraud
- Export reports for business users

---

## ğŸ“‚ Project Structure
.
â”œâ”€â”€ data/ # Folder containing input CSV files
â”‚ â”œâ”€â”€ user_referrals.csv
â”‚ â”œâ”€â”€ user_referral_logs.csv
â”‚ â”œâ”€â”€ user_logs.csv
â”‚ â”œâ”€â”€ user_referral_statuses.csv
â”‚ â”œâ”€â”€ referral_rewards.csv
â”‚ â”œâ”€â”€ paid_transactions.csv
â”‚ â”œâ”€â”€ lead_log.csv
â”œâ”€â”€ profiling/ # Auto-generated profiling results
â”‚ â””â”€â”€ profiling_report.csv
â”œâ”€â”€ output/ # Final report generated by the script
â”‚ â””â”€â”€ final_report.csv
â”œâ”€â”€ main.py # Main pipeline script
â”œâ”€â”€ requirements.txt # Python dependencies
â””â”€â”€ README.md # Project documentation

yaml
Copy code

---

## âš™ï¸ Setup Instructions

### 1. Clone the repository
```bash
git clone <your-repo-url>
cd <your-repo-folder>
2. Create a virtual environment (recommended)
bash
Copy code
python -m venv venv
source venv/bin/activate   # Mac/Linux
venv\Scripts\activate      # Windows
3. Install dependencies
bash
Copy code
pip install -r requirements.txt
4. Place CSV data
Make sure all input CSV files are inside the data/ folder:

user_referrals.csv

user_referral_logs.csv

user_logs.csv

user_referral_statuses.csv

referral_rewards.csv

paid_transactions.csv

lead_log.csv

5. Run the pipeline
bash
Copy code
python main.py
ğŸ“Š Outputs
Profiling Report
Path: profiling/profiling_report.csv
Includes:

Table name

Column name

Null count

Distinct count

Final Business Report
Path: output/final_report.csv
Includes:

Referral details

Referrer info

Transaction details

Business logic validation (is_business_logic_valid)

ğŸ§  Business Logic (Fraud Detection)
A referral is considered valid if:

Reward value > 0

Status = Berhasil (Successful)

Transaction status = PAID

Transaction type = NEW

Pending/failed referrals (Menunggu, Tidak Berhasil) must have reward_value = 0.

ğŸ³ Docker Setup (Optional)
Build and run using Docker:

bash
Copy code
docker build -t referral-pipeline .
docker run -v $(pwd)/data:/app/data -v $(pwd)/output:/app/output -v $(pwd)/profiling:/app/profiling referral-pipeline
ğŸ“– Data Dictionary (for business users)
user_referrals
referral_id: Unique identifier for referral

referrer_id: User who referred

referee_id: New user referred

referee_name: Name of new user

referee_phone: Phone of new user

referral_source: Where referral originated (User Sign Up, Draft Transaction, Lead)

referral_reward_id: Reward identifier

transaction_id: Transaction linked

user_referral_status_id: Status of referral

user_referral_logs
id: Unique log ID

user_referral_id: Referral ID link

source_transaction_id: Transaction linked

is_reward_granted: Boolean if reward granted

user_logs
user_id: User ID

name: User name

phone_number: User phone

homeclub: Home club

membership_expired_date: Membership expiry date

user_referral_statuses
id: Status ID

description: Status description (Berhasil, Menunggu, Tidak Berhasil)

referral_rewards
id: Reward ID

reward_value: Reward value

reward_type: Type (monetary, points)

paid_transactions
transaction_id: Transaction ID

transaction_status: Status (PAID)

transaction_type: Type (NEW, etc.)

lead_logs
lead_id: Lead ID

source_category: Category of lead source

preferred_location: Location
